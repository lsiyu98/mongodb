<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>校園美食系統 - 即時通訊客戶端aaaaaa</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .container { max-width: 800px; margin: auto; }
        .chat-box, .announcement-box { border: 1px solid #ccc; padding: 10px; margin-top: 10px; height: 150px; overflow-y: scroll; }
        h2 { border-bottom: 2px solid #eee; padding-bottom: 5px; }
        .message-input { display: flex; margin-top: 10px; }
        .message-input input[type="text"] { flex-grow: 1; padding: 5px; }
        .message-input button { margin-left: 10px; }
        .role-selector label { margin-right: 15px; }
        /* 讓按鈕更好看一點 */
        button {
            padding: 8px 15px;
            cursor: pointer;
            border: 1px solid #007bff;
            background-color: #007bff;
            color: white;
            border-radius: 5px;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>校園即時通訊模擬客戶端</h1>
        
        <div class="role-selector">
            <label>選擇身份：</label>
            <input type="radio" id="student" name="role" value="student" checked> <label for="student">學生 (user101)</label>
            <input type="radio" id="store" name="role" value="store"> <label for="store">店家 (store202)</label>
            <input type="radio" id="admin" name="role" value="admin"> <label for="admin">管理員 (admin001)</label>
            <button id="connectBtn">連線 / 重新註冊</button>
            <p>連線狀態: <span id="status">未連線</span></p>
        </div>

        <hr>

        <!-- 關鍵：這是公告發布面板，app.js 會控制它在 admin 和 store 身份下顯示 -->
        <div id="broadcastPanel" style="display:none;">
            <h2>公告發佈面板</h2>
            <p id="broadcastRoleStatus" style="font-weight: bold;">目前身份: </p>
            <select id="targetRole">
                <option value="student">學生</option>
                <option value="store">店家</option>
            </select>
            <input type="text" id="announcementInput" placeholder="輸入公告訊息" style="width: 300px; padding: 8px; border: 1px solid #ccc; border-radius: 5px;">
            <button id="broadcastBtn">發佈公告</button>
        </div>

        <div id="chat-section">
            <h2>即時聊天</h2>
            <div class="message-input">
                <input type="text" id="receiverId" placeholder="接收者ID (例如: student/store/admin)">
                <input type="text" id="chatInput" placeholder="輸入聊天訊息">
                <button id="sendChatBtn">發送</button>
            </div>
            <div id="chatMessages" class="chat-box"></div>
        </div>
        
        <h2>公告推播訊息</h2>
        <div id="announcementMessages" class="announcement-box"></div>
    </div>

    <!-- 關鍵修復: 加入 Axios CDN -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="app.js"></script>
</body>
</html>